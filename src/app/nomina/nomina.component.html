<<<<<<< HEAD
<div class="container">
  <h2>Gestión de Nóminas</h2>

  <!-- Selección del empleado -->
  <label for="empleado">Seleccionar Empleado:</label>
  <select [(ngModel)]="empleadoSeleccionado" class="form-control mb-2">
    <option [value]="null" disabled selected>-- Selecciona un empleado --</option>
    <option *ngFor="let empleado of empleados" [value]="empleado.idEmpleado">
      {{ empleado.nombre }} {{ empleado.apellido }}
    </option>
  </select>

  <button (click)="generarNomina()" class="btn btn-primary mb-3">Generar Nómina</button>

  <hr>

  <h3>Listado de Nóminas</h3>
  <table class="table table-bordered table-striped">
    <thead class="thead-dark">
      <tr>
        <th>RFC</th>
        <th>Fecha</th>
        <th>Periodo</th>
        <th>Sueldo Bruto</th>
        <th>Percepciones</th>
        <th>Deducciones</th>
        <th>Sueldo Neto</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let nomina of nominas">
        <td>{{ nomina.rfc }}</td>
        <td>{{ nomina.fecha | date:'shortDate' }}</td>
        <td>{{ nomina.periodo }}</td>
        <td>{{ nomina.sueldoBruto | currency }}</td>
        <td>{{ nomina.totalPercepciones | currency }}</td>
        <td>{{ nomina.totalDeducciones | currency }}</td>
        <td>{{ nomina.sueldoNeto | currency }}</td>
        <td>
          <button (click)="descargarRecibo(nomina.idNomina)" class="btn btn-success btn-sm">
            Descargar Recibo
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
=======
<div class="container mt-4">
  <h2>Registro de Nómina</h2>
  <form [formGroup]="nominaForm" (ngSubmit)="onSubmit()">
    
    <!-- Sección de datos básicos -->
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        Datos Básicos de Nómina
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="RFC">RFC del Empleado</label>
              <input type="text" class="form-control" id="RFC" formControlName="RFC" 
                     [class.is-invalid]="nominaForm.get('RFC')?.invalid && nominaForm.get('RFC')?.touched">
              <div *ngIf="nominaForm.get('RFC')?.invalid && nominaForm.get('RFC')?.touched" class="invalid-feedback">
                El RFC es requerido (máx. 20 caracteres)
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="Fecha">Fecha</label>
              <input type="date" class="form-control" id="Fecha" formControlName="Fecha"
                     [class.is-invalid]="nominaForm.get('Fecha')?.invalid && nominaForm.get('Fecha')?.touched">
              <div *ngIf="nominaForm.get('Fecha')?.invalid && nominaForm.get('Fecha')?.touched" class="invalid-feedback">
                La fecha es requerida
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="Periodo">Periodo</label>
              <input type="text" class="form-control" id="Periodo" formControlName="Periodo"
                     [class.is-invalid]="nominaForm.get('Periodo')?.invalid && nominaForm.get('Periodo')?.touched">
              <div *ngIf="nominaForm.get('Periodo')?.invalid && nominaForm.get('Periodo')?.touched" class="invalid-feedback">
                El periodo es requerido
              </div>
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-3">
            <div class="form-group">
              <label for="DiasPagados">Días Pagados</label>
              <input type="number" class="form-control" id="DiasPagados" formControlName="DiasPagados"
                     [class.is-invalid]="nominaForm.get('DiasPagados')?.invalid && nominaForm.get('DiasPagados')?.touched">
              <div *ngIf="nominaForm.get('DiasPagados')?.invalid && nominaForm.get('DiasPagados')?.touched" class="invalid-feedback">
                Ingrese un valor entre 1 y 31
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="TipoPago">Tipo de Pago</label>
              <select class="form-control" id="TipoPago" formControlName="TipoPago"
                      [class.is-invalid]="nominaForm.get('TipoPago')?.invalid && nominaForm.get('TipoPago')?.touched">
                <option value="">Seleccione...</option>
                <option value="Quincenal">Quincenal</option>
                <option value="Mensual">Mensual</option>
                <option value="Semanal">Semanal</option>
                <option value="Catorcenal">Catorcenal</option>
              </select>
              <div *ngIf="nominaForm.get('TipoPago')?.invalid && nominaForm.get('TipoPago')?.touched" class="invalid-feedback">
                Seleccione un tipo de pago
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="SueldoBruto">Sueldo Bruto</label>
              <input type="number" step="0.01" class="form-control" id="SueldoBruto" formControlName="SueldoBruto"
                     [class.is-invalid]="nominaForm.get('SueldoBruto')?.invalid && nominaForm.get('SueldoBruto')?.touched">
              <div *ngIf="nominaForm.get('SueldoBruto')?.invalid && nominaForm.get('SueldoBruto')?.touched" class="invalid-feedback">
                Ingrese un valor válido
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="SueldoNeto">Sueldo Neto</label>
              <input type="number" step="0.01" class="form-control" id="SueldoNeto" formControlName="SueldoNeto" readonly>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección de percepciones -->
    <div class="card mb-4">
      <div class="card-header bg-success text-white">
        Percepciones
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="SueldoBase">Sueldo Base</label>
              <input type="number" step="0.01" class="form-control" id="SueldoBase" 
                     formControlName="percepciones.SueldoBase"
                     [class.is-invalid]="nominaForm.get('percepciones.SueldoBase')?.invalid && nominaForm.get('percepciones.SueldoBase')?.touched">
              <div *ngIf="nominaForm.get('percepciones.SueldoBase')?.invalid && nominaForm.get('percepciones.SueldoBase')?.touched" class="invalid-feedback">
                Ingrese un valor válido
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="Puntualidad">Puntualidad</label>
              <input type="number" step="0.01" class="form-control" id="Puntualidad" 
                     formControlName="percepciones.Puntualidad">
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="ValesDespensa">Vales de Despensa</label>
              <input type="number" step="0.01" class="form-control" id="ValesDespensa" 
                     formControlName="percepciones.ValesDespensa">
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-3">
            <div class="form-group">
              <label for="Compensaciones">Compensaciones</label>
              <input type="number" step="0.01" class="form-control" id="Compensaciones" 
                     formControlName="percepciones.Compensaciones">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="Vacaciones">Vacaciones</label>
              <input type="number" step="0.01" class="form-control" id="Vacaciones" 
                     formControlName="percepciones.Vacaciones">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="PrimaAntiguedad">Prima Antigüedad</label>
              <input type="number" step="0.01" class="form-control" id="PrimaAntiguedad" 
                     formControlName="percepciones.PrimaAntiguedad">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="OtrasPrestaciones">Otras Prestaciones</label>
              <input type="number" step="0.01" class="form-control" id="OtrasPrestaciones" 
                     formControlName="percepciones.OtrasPrestaciones">
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-4 offset-md-8">
            <div class="form-group">
              <label for="TotalPercepciones">Total Percepciones</label>
              <input type="number" step="0.01" class="form-control" id="TotalPercepciones" 
                     formControlName="TotalPercepciones" readonly>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección de deducciones -->
    <div class="card mb-4">
      <div class="card-header bg-danger text-white">
        Deducciones
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-3">
            <div class="form-group">
              <label for="ISR">ISR</label>
              <input type="number" step="0.01" class="form-control" id="ISR" 
                     formControlName="deducciones.ISR"
                     [class.is-invalid]="nominaForm.get('deducciones.ISR')?.invalid && nominaForm.get('deducciones.ISR')?.touched">
              <div *ngIf="nominaForm.get('deducciones.ISR')?.invalid && nominaForm.get('deducciones.ISR')?.touched" class="invalid-feedback">
                Ingrese un valor válido
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="IMSS">IMSS</label>
              <input type="number" step="0.01" class="form-control" id="IMSS" 
                     formControlName="deducciones.IMSS"
                     [class.is-invalid]="nominaForm.get('deducciones.IMSS')?.invalid && nominaForm.get('deducciones.IMSS')?.touched">
              <div *ngIf="nominaForm.get('deducciones.IMSS')?.invalid && nominaForm.get('deducciones.IMSS')?.touched" class="invalid-feedback">
                Ingrese un valor válido
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="INFONAVIT">INFONAVIT</label>
              <input type="number" step="0.01" class="form-control" id="INFONAVIT" 
                     formControlName="deducciones.INFONAVIT">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="CajaAhorro">Caja de Ahorro</label>
              <input type="number" step="0.01" class="form-control" id="CajaAhorro" 
                     formControlName="deducciones.CajaAhorro">
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-3">
            <div class="form-group">
              <label for="Prestamos">Préstamos</label>
              <input type="number" step="0.01" class="form-control" id="Prestamos" 
                     formControlName="deducciones.Prestamos">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="FONACOT">FONACOT</label>
              <input type="number" step="0.01" class="form-control" id="FONACOT" 
                     formControlName="deducciones.FONACOT">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="CuotaSindical">Cuota Sindical</label>
              <input type="number" step="0.01" class="form-control" id="CuotaSindical" 
                     formControlName="deducciones.CuotaSindical">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="Otras">Otras Deducciones</label>
              <input type="number" step="0.01" class="form-control" id="Otras" 
                     formControlName="deducciones.Otras">
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-4 offset-md-8">
            <div class="form-group">
              <label for="TotalDeducciones">Total Deducciones</label>
              <input type="number" step="0.01" class="form-control" id="TotalDeducciones" 
                     formControlName="TotalDeducciones" readonly>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center mb-4">
      <button type="submit" class="btn btn-primary btn-lg" [disabled]="nominaForm.invalid">
        Registrar Nómina
      </button>
      <button type="button" class="btn btn-secondary btn-lg ml-2" (click)="nominaForm.reset()">
        Limpiar Formulario
      </button>
    </div>
  </form>
</div>
>>>>>>> b45b4e7b060691419bce0d2806643efd5a21c813
